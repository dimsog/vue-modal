(function(u,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(u=typeof globalThis<"u"?globalThis:u||self,t(u.modal={},u.Vue))})(this,function(u,t){"use strict";const b=new Map,C=(e,n)=>{b.set(e,n)},w=e=>{const n=b.get(e);return n===void 0?null:n},E=e=>{b.delete(e)},M=()=>b,v=(e,n,o)=>e-o.left>-10&&e-o.left<10&&n-o.top>-10&&n-o.top<10?"top-left":o.right-e>-10&&o.right-e<10&&n-o.top>-10&&n-o.top<10?"top-right":o.bottom-n>-10&&o.bottom-n<10&&e-o.left>-10&&e-o.left<10?"bottom-left":o.bottom-n>-10&&o.bottom-n<10&&o.right-e>-10&&o.right-e<10?"bottom-right":e-o.left>-5&&e-o.left<5?"left":o.right-e>-5&&o.right-e<5?"right":n-o.top>-5&&n-o.top<5?"top":o.bottom-n>-5&&o.bottom-n<5?"bottom":null,S=(e,n,o)=>{switch(v(e,n,o)){case"left":case"right":return"col-resize";case"top":case"bottom":return"row-resize";case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";default:return""}},z=e=>Math.round(document.documentElement.clientWidth/2-e/2),I=e=>{let n=Math.round(window.innerHeight/2-e/2);return n<0&&(n=5),n},x=e=>Number(e.replace("px","")),N=(e,n)=>({x:z(e),y:I(n),width:e,height:n}),B=()=>{let e=1e3;for(const n of M().values()){const o=n.getZIndex();o>e&&(e=o)}return e},W=()=>window.innerWidth-document.documentElement.clientWidth,V=(e,n)=>{e.addEventListener("pointermove",o=>{const r=e.getBoundingClientRect();e.style.cursor=S(o.clientX,o.clientY,r)}),e.addEventListener("pointerdown",o=>{const r=o.clientX,i=o.clientY,c=e.getBoundingClientRect();let d=v(r,i,c);if(d===null)return;const p=e.clientWidth,s=e.clientHeight,g=x(e.style.minWidth??""),k=x(e.style.minHeight??"");let a=p,f=s,_=c.top,y=c.left;document.body.style.userSelect="none",document.body.style.setProperty("-webkit-user-select","none"),document.addEventListener("pointermove",l=>{d!==null&&(d==="left"&&(y=c.left+(l.clientX-r),a=p-(l.clientX-r)),d==="right"&&(a=p+(l.clientX-r)),d==="top"&&(f=s-(l.clientY-i),f>k&&(_=c.top+(l.clientY-i))),d==="bottom"&&(f=s+(l.clientY-i)),d=="top-left"&&(a=p-(l.clientX-r),a>g&&(y=c.left+(l.clientX-r)),f=s-(l.clientY-i),f>k&&(_=c.top+(l.clientY-i))),d=="top-right"&&(a=p+(l.clientX-r),a>g&&(_=c.top+(l.clientY-i),f=s-(l.clientY-i))),d=="bottom-left"&&(a=p-(l.clientX-r),f=s+(l.clientY-i),a>g&&(y=c.left+(l.clientX-r))),d=="bottom-right"&&(a=p+(l.clientX-r),f=s+(l.clientY-i)),e.style.width=a+"px",e.style.left=y+"px",l.clientY>=0&&(e.style.height=f+"px",e.style.top=_+"px"),n.resize({x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y,width:e.clientWidth,height:e.clientHeight}))}),document.addEventListener("pointerup",()=>{d=null,document.body.style.userSelect="none",document.body.style.setProperty("-webkit-user-select","")})})},H=(e,n)=>{const o=e.querySelector(".modal-header");o==null||o.addEventListener("pointerdown",r=>{const i=r.clientX-e.getBoundingClientRect().left,c=r.clientY-e.getBoundingClientRect().top,d=function(p){let s=p.clientY-c;s<0&&(s=0),e.style.top=s+"px",e.style.left=p.clientX-i+"px",document.body.style.userSelect="none",document.body.style.setProperty("-webkit-user-select","none"),n.move({x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y,width:e.clientWidth,height:e.clientHeight})};document.addEventListener("pointermove",d),document.addEventListener("pointerup",()=>{document.removeEventListener("pointermove",d),document.body.style.userSelect="",document.body.style.setProperty("-webkit-user-select","")},{once:!0})})},R=(e,n)=>{e.style.width=n.width+"px",e.style.height=n.height+"px",e.style.top=n.y!==null?n.y+"px":document.documentElement.clientHeight/2-e.clientHeight/2+"px",e.style.left=n.x!==null?n.x+"px":document.documentElement.clientWidth/2-e.clientWidth/2+"px"},L=t.defineComponent({__name:"ModalBackdrop",emits:["close"],setup(e,{emit:n}){const o=t.ref(null),r=n,i=()=>{o.value.style.width=document.documentElement.clientWidth+"px",o.value.style.height=document.documentElement.clientHeight+"px"},c=()=>{r("close"),document.body.style.overflow=""};return t.onMounted(()=>{i(),window.addEventListener("resize",i)}),t.onUnmounted(()=>{window.removeEventListener("resize",i)}),(d,p)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"$backdrop",ref:o,onClick:c,class:"backdrop"},null,512))}}),le="",h=(e,n)=>{const o=e.__vccOpts||e;for(const[r,i]of n)o[r]=i;return o},T=h(L,[["__scopeId","data-v-84088cde"]]),F=[(e=>(t.pushScopeId("data-v-6fa6eada"),e=e(),t.popScopeId(),e))(()=>t.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),t.createElementVNode("path",{d:"M18 6l-12 12"}),t.createElementVNode("path",{d:"M6 6l12 12"})],-1))],O=t.defineComponent({__name:"ModalCloseButton",emits:["close"],setup(e,{emit:n}){const o=n,r=()=>{o("close")};return(i,c)=>(t.openBlock(),t.createElementBlock("button",{type:"button",onClick:t.withModifiers(r,["prevent"])},F))}}),re="",P=h(O,[["__scopeId","data-v-6fa6eada"]]),q={class:"modal-header__title"},Y={class:"modal-header__buttons"},j=t.defineComponent({__name:"Modal",props:{name:{type:String,required:!0},title:{type:String,required:!1,default:null},minWidth:{type:String,default:"200px"},width:{type:String,default:"600px"},minHeight:{type:String,default:"200px"},height:{type:String,default:"400px"},backdrop:{type:Boolean,default:!1},staticBackdrop:{type:Boolean,default:!1},resize:{type:Boolean,default:!0},theme:{type:String,default:"white"}},setup(e){const n=t.ref(!1),o=t.ref(!1),r=t.ref(!1),i=e,c=t.ref(null),d=t.ref(null),p=t.ref(null);let s;const g=()=>{s=s||N(x(i.width),x(i.height));const l=W();l>0&&(document.body.style.paddingRight=l+"px"),document.body.style.overflow="hidden",n.value=!0,setTimeout(()=>o.value=!0,10),t.nextTick(async()=>{c.value===null||d.value===null||(a(),c.value.style.zIndex=(B()+1).toString(),c.value.style.minWidth=i.minWidth,c.value.style.minHeight=i.minHeight,R(c.value,s),i.resize&&V(c.value,{resize:m=>{s=m}}),H(c.value,{move:m=>{s=m}}))})},k=()=>{var l;return Number(((l=c.value)==null?void 0:l.style.zIndex)??1e3)},a=()=>{if(c.value===null||r.value===!0)return;for(const m of M().values())m.deactivate();let l=B()+1;r.value=!0,c.value.style.zIndex=l.toString()},f=()=>{if(r.value=!1,c.value!==null){let l=Number(c.value.style.zIndex)-1;l<1e3&&(l=1e3),c.value.style.setProperty("z-index",l.toString())}},_=()=>{o.value=!1,document.body.style.paddingRight="",document.body.style.overflow="",setTimeout(()=>{n.value=!1},150)},y=()=>{i.staticBackdrop||_()};return t.onMounted(()=>{C(i.name,{open:g,close:_,activate:a,deactivate:f,getZIndex:k})}),t.onUnmounted(()=>{E(i.name)}),(l,m)=>(t.openBlock(),t.createElementBlock("div",null,[t.createElementVNode("div",{onPointerdown:a,ref_key:"$modal",ref:c,class:t.normalizeClass(["modal",{"modal--hidden":!n.value,"modal-visible":o.value,"modal--theme-black":i.theme==="black"}])},[t.createElementVNode("div",{ref_key:"$headerWrapper",ref:d,class:"modal-header-wrapper"},[t.createElementVNode("div",{ref_key:"$header",ref:p,class:"modal-header"},[t.createElementVNode("div",q,t.toDisplayString(e.title),1),t.createElementVNode("div",Y,[t.createVNode(P,{onClose:_})])],512)],512),t.renderSlot(l.$slots,"default",{},void 0,!0)],34),t.createVNode(t.Transition,null,{default:t.withCtx(()=>[i.backdrop&&n.value?(t.openBlock(),t.createBlock(T,{key:0,onClose:y})):t.createCommentVNode("",!0)]),_:1})]))}}),de="",A=h(j,[["__scopeId","data-v-225ac34f"]]),X=t.defineComponent({__name:"ModalFooter",setup(e){const n=t.ref(null);let o=!0;return t.onMounted(()=>{o=n.value!==null&&n.value.querySelectorAll("button").length>0}),(r,i)=>t.unref(o)?(t.openBlock(),t.createElementBlock("div",{key:0,ref_key:"$footerNode",ref:n,class:"modal-footer"},[t.renderSlot(r.$slots,"default",{},void 0,!0)],512)):t.createCommentVNode("",!0)}}),se="",Z=h(X,[["__scopeId","data-v-9f703cbb"]]),ae="",U={},D={class:"modal-body"},G={class:"modal-body__content"};function J(e,n){return t.openBlock(),t.createElementBlock("div",D,[t.createElementVNode("div",G,[t.renderSlot(e.$slots,"default",{},void 0,!0)])])}const K=h(U,[["render",J],["__scopeId","data-v-dc47cc62"]]),pe="",Q={},$={type:"button"};function ee(e,n){return t.openBlock(),t.createElementBlock("button",$,[t.renderSlot(e.$slots,"default",{},void 0,!0)])}const te=h(Q,[["render",ee],["__scopeId","data-v-eff1971f"]]),ne=e=>{var n;(n=w(e))==null||n.open()},oe=e=>{var n;(n=w(e))==null||n.close()};u.Modal=A,u.ModalButton=te,u.ModalContent=K,u.ModalFooter=Z,u.close=oe,u.open=ne,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=modal.umd.cjs.map
