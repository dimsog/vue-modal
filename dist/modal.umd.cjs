(function(p,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(p=typeof globalThis<"u"?globalThis:p||self,t(p.modal={},p.Vue))})(this,function(p,t){"use strict";const k=t.defineComponent({__name:"ModalBackdrop",emits:["close"],setup(e,{emit:o}){const n=t.ref(null),l=o,c=()=>{n.value.style.width=document.documentElement.clientWidth+"px",n.value.style.height=document.documentElement.clientHeight+"px"},r=()=>{l("close"),document.body.style.overflow=""};return t.onMounted(()=>{c(),window.addEventListener("resize",c),document.body.style.overflow="hidden"}),t.onUnmounted(()=>{document.body.style.overflow="",window.removeEventListener("resize",c)}),(i,s)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"$backdrop",ref:n,onClick:r,class:"backdrop"},null,512))}}),D="",_=(e,o)=>{const n=e.__vccOpts||e;for(const[l,c]of o)n[l]=c;return n},w=_(k,[["__scopeId","data-v-a9a01d98"]]),g=new Map,x=(e,o)=>{g.set(e,o)},m=e=>{const o=g.get(e);return o===void 0?null:o},M=e=>{g.delete(e)},b=(e,o,n)=>e-n.left>-10&&e-n.left<10&&o-n.top>-10&&o-n.top<10?"top-left":n.right-e>-10&&n.right-e<10&&o-n.top>-10&&o-n.top<10?"top-right":n.bottom-o>-10&&n.bottom-o<10&&e-n.left>-10&&e-n.left<10?"bottom-left":n.bottom-o>-10&&n.bottom-o<10&&n.right-e>-10&&n.right-e<10?"bottom-right":e-n.left>-5&&e-n.left<5?"left":n.right-e>-5&&n.right-e<5?"right":o-n.top>-5&&o-n.top<5?"top":n.bottom-o>-5&&n.bottom-o<5?"bottom":null,B=(e,o,n)=>{switch(b(e,o,n)){case"left":case"right":return"col-resize";case"top":case"bottom":return"row-resize";case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";default:return""}},E=(e,o)=>{e.addEventListener("mousemove",n=>{const l=e.getBoundingClientRect();e.style.cursor=B(n.clientX,n.clientY,l)}),e.addEventListener("mousedown",n=>{const l=n.clientX,c=n.clientY,r=e.getBoundingClientRect();let i=b(l,c,r);if(i===null)return;const s=e.clientWidth,u=e.clientHeight;let a=s,f=u,h=r.top,y=r.left;document.body.style.userSelect="none",document.body.style.setProperty("-webkit-user-select","none"),document.addEventListener("mousemove",d=>{i!==null&&(i==="left"&&(y=r.left+(d.clientX-l),a=s-(d.clientX-l)),i==="right"&&(a=s+(d.clientX-l)),i==="top"&&(h=r.top+(d.clientY-c),f=u-(d.clientY-c)),i==="bottom"&&(f=u+(d.clientY-c)),i=="top-left"&&(y=r.left+(d.clientX-l),a=s-(d.clientX-l),h=r.top+(d.clientY-c),f=u-(d.clientY-c)),i=="top-right"&&(a=s+(d.clientX-l),h=r.top+(d.clientY-c),f=u-(d.clientY-c)),i=="bottom-left"&&(y=r.left+(d.clientX-l),a=s-(d.clientX-l),f=u+(d.clientY-c)),i=="bottom-right"&&(a=s+(d.clientX-l),f=u+(d.clientY-c)),e.style.width=a+"px",e.style.height=f+"px",e.style.left=y+"px",e.style.top=h+"px",o({x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y,width:e.clientWidth,height:e.clientHeight}))}),e.addEventListener("mouseup",()=>{i=null,document.body.style.userSelect="none",document.body.style.setProperty("-webkit-user-select","")})})},v=(e,o)=>{e.querySelector(".modal-header").addEventListener("mousedown",l=>{let c=l.clientX-e.getBoundingClientRect().left,r=l.clientY-e.getBoundingClientRect().top;const i=function(s){e.style.top=s.clientY-r+"px",e.style.left=s.clientX-c+"px",document.body.style.userSelect="none",document.body.style.setProperty("-webkit-user-select","none"),o({x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y,width:e.clientWidth,height:e.clientHeight})};document.addEventListener("mousemove",i),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",i),document.body.style.userSelect="",document.body.style.setProperty("-webkit-user-select","")},{once:!0})})},C=(e,o)=>{e.style.width=o.width+"px",e.style.height=o.height+"px",e.style.top=o.y!==null?o.y+"px":document.documentElement.clientHeight/2-e.clientHeight/2+"px",e.style.left=o.x!==null?o.x+"px":document.documentElement.clientWidth/2-e.clientWidth/2+"px"},S=e=>(t.pushScopeId("data-v-eb6adce0"),e=e(),t.popScopeId(),e),N={class:"modal-header__title"},z={class:"modal-header__buttons"},V=[S(()=>t.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),t.createElementVNode("path",{d:"M18 6l-12 12"}),t.createElementVNode("path",{d:"M6 6l12 12"})],-1))],L=t.defineComponent({__name:"Modal",props:{name:{type:String,required:!0},title:{type:String,required:!1,default:null},width:{type:String,default:"600px"},height:{type:String,default:"400px"},backdrop:{type:Boolean,default:!1},resize:{type:Boolean,default:!0}},setup(e){const o=t.ref(!1),n=e,l=t.ref(null),c=t.ref(null),r=t.ref(null);let i=null;const s=()=>{i=i||{x:document.documentElement.clientWidth/2-Number(n.width.replace("px",""))/2,y:window.innerHeight/2-Number(n.height.replace("px",""))/2,width:Number(n.width.replace("px","")),height:Number(n.height.replace("px",""))},o.value=!0,t.nextTick(async()=>{l.value===null||c.value===null||(C(l.value,i),n.resize&&E(l.value,a=>{i=a}),v(l.value,a=>{i=a}))})},u=()=>{o.value=!1};return t.onMounted(()=>{x(n.name,{open:s,close:u})}),t.onUnmounted(()=>{M(n.name)}),(a,f)=>(t.openBlock(),t.createElementBlock("div",null,[t.createElementVNode("div",{ref_key:"$modal",ref:l,class:t.normalizeClass(["modal",{"modal--hidden":!o.value}])},[t.createElementVNode("div",{ref_key:"$headerWrapper",ref:c,class:"modal-header-wrapper"},[t.createElementVNode("div",{ref_key:"$header",ref:r,class:"modal-header"},[t.createElementVNode("div",N,t.toDisplayString(e.title),1),t.createElementVNode("div",z,[t.createElementVNode("button",{type:"button",onClick:t.withModifiers(u,["prevent"])},V)])],512)],512),t.renderSlot(a.$slots,"default",{},void 0,!0)],2),n.backdrop&&o.value?(t.openBlock(),t.createBlock(w,{key:0,onClose:u})):t.createCommentVNode("",!0)]))}}),J="",R=_(L,[["__scopeId","data-v-eb6adce0"]]),W=t.defineComponent({__name:"ModalFooter",setup(e){const o=t.ref(null);let n=!0;return t.onMounted(()=>{n=o.value!==null&&o.value.querySelectorAll("button").length>0}),(l,c)=>t.unref(n)?(t.openBlock(),t.createElementBlock("div",{key:0,ref_key:"$footerNode",ref:o,class:"modal-footer"},[t.renderSlot(l.$slots,"default",{},void 0,!0)],512)):t.createCommentVNode("",!0)}}),K="",H=_(W,[["__scopeId","data-v-0db79781"]]),Q="",I={},T={class:"modal-body"},q={class:"modal-body__content"};function F(e,o){return t.openBlock(),t.createElementBlock("div",T,[t.createElementVNode("div",q,[t.renderSlot(e.$slots,"default",{},void 0,!0)])])}const j=_(I,[["render",F],["__scopeId","data-v-dc47cc62"]]),Z="",O={},A={type:"button"};function P(e,o){return t.openBlock(),t.createElementBlock("button",A,[t.renderSlot(e.$slots,"default",{},void 0,!0)])}const U=_(O,[["render",P],["__scopeId","data-v-f7bd57cd"]]),X=e=>{var o;(o=m(e))==null||o.open()},Y=e=>{var o;(o=m(e))==null||o.close()};p.Modal=R,p.ModalButton=U,p.ModalContent=j,p.ModalFooter=H,p.close=Y,p.open=X,Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=modal.umd.cjs.map
