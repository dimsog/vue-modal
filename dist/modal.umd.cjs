(function(a,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(a=typeof globalThis<"u"?globalThis:a||self,n(a.Modal={},a.Vue))})(this,function(a,n){"use strict";const k=n.defineComponent({__name:"ModalBackdrop",emits:["close"],setup(e,{emit:t}){const o=n.ref(null),l=()=>{o.value.style.width=document.documentElement.clientWidth+"px",o.value.style.height=document.documentElement.clientHeight+"px"},c=()=>{t("close"),document.body.style.overflow=""};return n.onMounted(()=>{l(),window.addEventListener("resize",l),document.body.style.overflow="hidden"}),n.onUnmounted(()=>{document.body.style.overflow="",window.removeEventListener("resize",l)}),(r,i)=>(n.openBlock(),n.createElementBlock("div",{ref_key:"$backdrop",ref:o,onClick:c,class:"backdrop"},null,512))}}),J="",h=(e,t)=>{const o=e.__vccOpts||e;for(const[l,c]of t)o[l]=c;return o},w=h(k,[["__scopeId","data-v-a9a01d98"]]),y=new Map,x=(e,t)=>{y.set(e,t)},m=e=>{const t=y.get(e);return t===void 0?null:t},M=e=>{y.delete(e)},b=(e,t,o)=>e-o.left>-10&&e-o.left<10&&t-o.top>-10&&t-o.top<10?"top-left":o.right-e>-10&&o.right-e<10&&t-o.top>-10&&t-o.top<10?"top-right":o.bottom-t>-10&&o.bottom-t<10&&e-o.left>-10&&e-o.left<10?"bottom-left":o.bottom-t>-10&&o.bottom-t<10&&o.right-e>-10&&o.right-e<10?"bottom-right":e-o.left>-5&&e-o.left<5?"left":o.right-e>-5&&o.right-e<5?"right":t-o.top>-5&&t-o.top<5?"top":o.bottom-t>-5&&o.bottom-t<5?"bottom":null,B=(e,t,o)=>{switch(b(e,t,o)){case"left":case"right":return"col-resize";case"top":case"bottom":return"row-resize";case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";default:return""}},E=(e,t)=>{e.addEventListener("mousemove",o=>{const l=e.getBoundingClientRect();e.style.cursor=B(o.clientX,o.clientY,l)}),e.addEventListener("mousedown",o=>{const l=o.clientX,c=o.clientY,r=e.getBoundingClientRect();let i=b(l,c,r);if(i===null)return;const p=e.clientWidth,_=e.clientHeight;let s=p,f=_,u=r.top,g=r.left;e.style.userSelect="none",document.addEventListener("mousemove",d=>{i!==null&&(i==="left"&&(g=r.left+(d.clientX-l),s=p-(d.clientX-l)),i==="right"&&(s=p+(d.clientX-l)),i==="top"&&(u=r.top+(d.clientY-c),f=_-(d.clientY-c)),i==="bottom"&&(f=_+(d.clientY-c)),i=="top-left"&&(g=r.left+(d.clientX-l),s=p-(d.clientX-l),u=r.top+(d.clientY-c),f=_-(d.clientY-c)),i=="top-right"&&(s=p+(d.clientX-l),u=r.top+(d.clientY-c),f=_-(d.clientY-c)),i=="bottom-left"&&(g=r.left+(d.clientX-l),s=p-(d.clientX-l),f=_+(d.clientY-c)),i=="bottom-right"&&(s=p+(d.clientX-l),f=_+(d.clientY-c)),e.style.width=s+"px",e.style.height=f+"px",e.style.left=g+"px",e.style.top=u+"px",t({x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y,width:e.clientWidth,height:e.clientHeight}))}),e.addEventListener("mouseup",()=>{i=null,e.style.userSelect=""})})},v=(e,t)=>{e.querySelector(".modal-header").addEventListener("mousedown",l=>{let c=l.clientX-e.getBoundingClientRect().left,r=l.clientY-e.getBoundingClientRect().top;const i=function(p){e.style.top=p.clientY-r+"px",e.style.left=p.clientX-c+"px",t({x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y,width:e.clientWidth,height:e.clientHeight})};document.addEventListener("mousemove",i),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",i)},{once:!0})})},C=(e,t)=>{e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.top=t.y!==null?t.y+"px":document.documentElement.clientHeight/2-e.clientHeight/2+"px",e.style.left=t.x!==null?t.x+"px":document.documentElement.clientWidth/2-e.clientWidth/2+"px"},S=e=>(n.pushScopeId("data-v-82cdca4a"),e=e(),n.popScopeId(),e),N={class:"modal-header__title"},z={class:"modal-header__buttons"},V=["onClick"],L=[S(()=>n.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[n.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.createElementVNode("path",{d:"M18 6l-12 12"}),n.createElementVNode("path",{d:"M6 6l12 12"})],-1))],R=n.defineComponent({__name:"Modal",props:{name:{type:String,required:!0},title:{type:String,required:!1,default:null},width:{type:String,default:"600px"},height:{type:String,default:"400px"},backdrop:{type:Boolean,default:!1},resize:{type:Boolean,default:!0}},setup(e){const t=e,o=n.ref(!1),l=n.ref(null),c=n.ref(null),r=n.ref(null);let i=null;const p=()=>{i=i||{x:document.documentElement.clientWidth/2-Number(t.width.replace("px",""))/2,y:window.innerHeight/2-Number(t.height.replace("px",""))/2,width:Number(t.width.replace("px","")),height:Number(t.height.replace("px",""))},o.value=!0,n.nextTick(async()=>{l.value===null||c.value===null||(C(l.value,i),t.resize&&E(l.value,s=>{i=s}),v(l.value,s=>{i=s}))})},_=()=>{o.value=!1};return n.onMounted(()=>{x(t.name,{open:p,close:_})}),n.onUnmounted(()=>{M(t.name)}),(s,f)=>(n.openBlock(),n.createElementBlock("div",null,[n.createElementVNode("div",{ref_key:"$modal",ref:l,class:n.normalizeClass(["modal",{"modal--hidden":!o.value}])},[n.createElementVNode("div",{ref_key:"$headerWrapper",ref:c,class:"modal-header-wrapper"},[n.createElementVNode("div",{ref_key:"$header",ref:r,class:"modal-header"},[n.createElementVNode("div",N,n.toDisplayString(e.title),1),n.createElementVNode("div",z,[n.createElementVNode("button",{type:"button",onClick:n.withModifiers(_,["prevent"])},L,8,V)])],512)],512),n.renderSlot(s.$slots,"default",{},void 0,!0)],2),t.backdrop&&o.value?(n.openBlock(),n.createBlock(w,{key:0,onClose:_})):n.createCommentVNode("",!0)]))}}),Q="",W=h(R,[["__scopeId","data-v-82cdca4a"]]),H=n.defineComponent({__name:"ModalFooter",setup(e){const t=n.ref(null);let o=!0;return n.onMounted(()=>{o=t.value!==null&&t.value.querySelectorAll("button").length>0}),(l,c)=>n.unref(o)?(n.openBlock(),n.createElementBlock("div",{key:0,ref_key:"$footerNode",ref:t,class:"modal-footer"},[n.renderSlot(l.$slots,"default",{},void 0,!0)],512)):n.createCommentVNode("",!0)}}),Z="",I=h(H,[["__scopeId","data-v-7b30dbab"]]),P="",T={},q={class:"modal-body"},F={class:"modal-body__content"};function j(e,t){return n.openBlock(),n.createElementBlock("div",q,[n.createElementVNode("div",F,[n.renderSlot(e.$slots,"default",{},void 0,!0)])])}const O=h(T,[["render",j],["__scopeId","data-v-59882b06"]]),$="",A={},U={type:"button"};function X(e,t){return n.openBlock(),n.createElementBlock("button",U,[n.renderSlot(e.$slots,"default",{},void 0,!0)])}const Y=h(A,[["render",X],["__scopeId","data-v-182aabb5"]]),D=e=>{var t;(t=m(e))==null||t.open()},G=e=>{var t;(t=m(e))==null||t.close()};a.Modal=W,a.ModalButton=Y,a.ModalContent=O,a.ModalFooter=I,a.close=G,a.open=D,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=modal.umd.cjs.map
