(function(f,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(f=typeof globalThis<"u"?globalThis:f||self,n(f.Modal={},f.Vue))})(this,function(f,n){"use strict";const k=n.defineComponent({__name:"ModalBackdrop",emits:["close"],setup(t,{emit:e}){const o=n.ref(null),p=()=>{o.value.style.width=document.documentElement.clientWidth+"px",o.value.style.height=document.documentElement.clientHeight+"px"},s=()=>{e("close"),document.body.style.overflow=""};return n.onMounted(()=>{p(),window.addEventListener("resize",p),document.body.style.overflow="hidden"}),(l,r)=>(n.openBlock(),n.createElementBlock("div",{ref_key:"$backdrop",ref:o,onClick:s,class:"backdrop"},null,512))}}),q="",x=(t,e)=>{const o=t.__vccOpts||t;for(const[p,s]of e)o[p]=s;return o},E=x(k,[["__scopeId","data-v-44b276f1"]]),m=new Map,B=(t,e)=>{m.set(t,e)},b=t=>{const e=m.get(t);return e===void 0?null:e},M=t=>{m.delete(t)},w=(t,e,o)=>t-o.left>-10&&t-o.left<10&&e-o.top>-10&&e-o.top<10?"top-left":o.right-t>-10&&o.right-t<10&&e-o.top>-10&&e-o.top<10?"top-right":o.bottom-e>-10&&o.bottom-e<10&&t-o.left>-10&&t-o.left<10?"bottom-left":o.bottom-e>-10&&o.bottom-e<10&&o.right-t>-10&&o.right-t<10?"bottom-right":t-o.left>-5&&t-o.left<5?"left":o.right-t>-5&&o.right-t<5?"right":e-o.top>-5&&e-o.top<5?"top":o.bottom-e>-5&&o.bottom-e<5?"bottom":null,v=(t,e,o)=>{switch(w(t,e,o)){case"left":case"right":return"col-resize";case"top":case"bottom":return"row-resize";case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";default:return""}},C=(t,e,o)=>{let p=!1;e.addEventListener("mousemove",s=>{if(p)return;const l=e.getBoundingClientRect();e.style.cursor=v(s.clientX,s.clientY,l)}),e.addEventListener("mousedown",s=>{if(p)return;const l=s.clientX,r=s.clientY,c=e.getBoundingClientRect();let d=w(l,r,c);if(d===null)return;const a=e.clientWidth,h=e.clientHeight;let u=a,g=h,_=c.top,y=c.left;e.style.userSelect="none",document.addEventListener("mousemove",i=>{d!==null&&(d==="left"&&(y=c.left+(i.clientX-l),u=a-(i.clientX-l)),d==="right"&&(u=a+(i.clientX-l)),d==="top"&&(_=c.top+(i.clientY-r),g=h-(i.clientY-r)),d==="bottom"&&(g=h+(i.clientY-r)),d=="top-left"&&(y=c.left+(i.clientX-l),u=a-(i.clientX-l),_=c.top+(i.clientY-r),g=h-(i.clientY-r)),d=="top-right"&&(u=a+(i.clientX-l),_=c.top+(i.clientY-r),g=h-(i.clientY-r)),d=="bottom-left"&&(y=c.left+(i.clientX-l),u=a-(i.clientX-l),g=h+(i.clientY-r)),d=="bottom-right"&&(u=a+(i.clientX-l),g=h+(i.clientY-r)),e.style.width=u+"px",e.style.height=g+"px",e.style.left=y+"px",e.style.top=_+"px",o({x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y,width:e.clientWidth,height:e.clientHeight}))}),e.addEventListener("mouseup",()=>{d=null,e.style.userSelect=""})}),t.addEventListener("mousedown",s=>{let l=s.clientX-e.getBoundingClientRect().left,r=s.clientY-e.getBoundingClientRect().top;p=!0;const c=function(d){e.style.top=d.pageY-r+"px",e.style.left=d.pageX-l+"px",o({x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y,width:e.clientWidth,height:e.clientHeight})};document.addEventListener("mousemove",c),t.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",c),p=!1})})},N=(t,e)=>{t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.top=e.y!==null?e.y+"px":document.documentElement.clientHeight/2-t.clientHeight/2+"px",t.style.left=e.x!==null?e.x+"px":document.documentElement.clientWidth/2-t.clientWidth/2+"px"},S=t=>(n.pushScopeId("data-v-78d372ce"),t=t(),n.popScopeId(),t),V={class:"modal-header__title"},z={class:"modal-header__buttons"},H=["onClick"],R=[S(()=>n.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[n.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.createElementVNode("path",{d:"M18 6l-12 12"}),n.createElementVNode("path",{d:"M6 6l12 12"})],-1))],W={class:"modal-body__content"},L=n.defineComponent({__name:"Modal",props:{name:{type:String,required:!0},title:{type:String,required:!1,default:null},width:{type:String,default:"600px"},height:{type:String,default:"400px"},backdrop:{type:Boolean,default:!1}},setup(t){const e=t,o=n.ref(!1),p=n.ref(null),s=n.ref(null),l=n.ref(null),r=n.ref(null);let c=null;const d=()=>{c=c||{x:document.documentElement.clientWidth/2-Number(e.width.replace("px",""))/2,y:window.innerHeight/2-Number(e.height.replace("px",""))/2,width:Number(e.width.replace("px","")),height:Number(e.height.replace("px",""))},o.value=!0,n.nextTick(async()=>{N(p.value,c),C(l.value,p.value,h=>{c=h}),r.value.style.height=`calc(100% - ${s.value.clientHeight}px)`})},a=()=>{o.value=!1};return n.onMounted(()=>{B(e.name,{open:d,close:a})}),n.onUnmounted(()=>{M(e.name)}),(h,u)=>(n.openBlock(),n.createElementBlock("div",null,[n.createElementVNode("div",{ref_key:"$modal",ref:p,class:n.normalizeClass(["modal",{"modal--hidden":!o.value}])},[n.createElementVNode("div",{ref_key:"$headerWrapper",ref:s,class:"modal-header-wrapper"},[n.createElementVNode("div",{ref_key:"$header",ref:l,class:"modal-header"},[n.createElementVNode("div",V,n.toDisplayString(t.title),1),n.createElementVNode("div",z,[n.createElementVNode("button",{type:"button",onClick:n.withModifiers(a,["prevent"])},R,8,H)])],512)],512),n.createElementVNode("div",{ref_key:"$modalBody",ref:r,class:"modal-body"},[n.createElementVNode("div",W,[n.renderSlot(h.$slots,"default",{},void 0,!0)])],512)],2),e.backdrop&&o.value?(n.openBlock(),n.createBlock(E,{key:0,onClose:a})):n.createCommentVNode("",!0)]))}}),X="",I=x(L,[["__scopeId","data-v-78d372ce"]]),T=t=>{var e;(e=b(t))==null||e.open()},j=t=>{var e;(e=b(t))==null||e.close()};f.Modal=I,f.close=j,f.open=T,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
