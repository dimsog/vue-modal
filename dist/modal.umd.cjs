(function(p,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(p=typeof globalThis<"u"?globalThis:p||self,t(p.modal={},p.Vue))})(this,function(p,t){"use strict";const m=new Map,k=(e,o)=>{m.set(e,o)},g=e=>{const o=m.get(e);return o===void 0?null:o},w=e=>{m.delete(e)},b=(e,o,n)=>e-n.left>-10&&e-n.left<10&&o-n.top>-10&&o-n.top<10?"top-left":n.right-e>-10&&n.right-e<10&&o-n.top>-10&&o-n.top<10?"top-right":n.bottom-o>-10&&n.bottom-o<10&&e-n.left>-10&&e-n.left<10?"bottom-left":n.bottom-o>-10&&n.bottom-o<10&&n.right-e>-10&&n.right-e<10?"bottom-right":e-n.left>-5&&e-n.left<5?"left":n.right-e>-5&&n.right-e<5?"right":o-n.top>-5&&o-n.top<5?"top":n.bottom-o>-5&&n.bottom-o<5?"bottom":null,x=(e,o,n)=>{switch(b(e,o,n)){case"left":case"right":return"col-resize";case"top":case"bottom":return"row-resize";case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";default:return""}},B=(e,o)=>{e.addEventListener("mousemove",n=>{const l=e.getBoundingClientRect();e.style.cursor=x(n.clientX,n.clientY,l)}),e.addEventListener("mousedown",n=>{const l=n.clientX,i=n.clientY,r=e.getBoundingClientRect();let c=b(l,i,r);if(c===null)return;const s=e.clientWidth,_=e.clientHeight;let a=s,u=_,h=r.top,y=r.left;document.body.style.userSelect="none",document.body.style.setProperty("-webkit-user-select","none"),document.addEventListener("mousemove",d=>{c!==null&&(c==="left"&&(y=r.left+(d.clientX-l),a=s-(d.clientX-l)),c==="right"&&(a=s+(d.clientX-l)),c==="top"&&(h=r.top+(d.clientY-i),u=_-(d.clientY-i)),c==="bottom"&&(u=_+(d.clientY-i)),c=="top-left"&&(y=r.left+(d.clientX-l),a=s-(d.clientX-l),h=r.top+(d.clientY-i),u=_-(d.clientY-i)),c=="top-right"&&(a=s+(d.clientX-l),h=r.top+(d.clientY-i),u=_-(d.clientY-i)),c=="bottom-left"&&(y=r.left+(d.clientX-l),a=s-(d.clientX-l),u=_+(d.clientY-i)),c=="bottom-right"&&(a=s+(d.clientX-l),u=_+(d.clientY-i)),e.style.width=a+"px",e.style.height=u+"px",e.style.left=y+"px",e.style.top=h+"px",o({x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y,width:e.clientWidth,height:e.clientHeight}))}),e.addEventListener("mouseup",()=>{c=null,document.body.style.userSelect="none",document.body.style.setProperty("-webkit-user-select","")})})},M=(e,o)=>{e.querySelector(".modal-header").addEventListener("mousedown",l=>{let i=l.clientX-e.getBoundingClientRect().left,r=l.clientY-e.getBoundingClientRect().top;const c=function(s){e.style.top=s.clientY-r+"px",e.style.left=s.clientX-i+"px",document.body.style.userSelect="none",document.body.style.setProperty("-webkit-user-select","none"),o({x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y,width:e.clientWidth,height:e.clientHeight})};document.addEventListener("mousemove",c),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",c),document.body.style.userSelect="",document.body.style.setProperty("-webkit-user-select","")},{once:!0})})},E=(e,o)=>{e.style.width=o.width+"px",e.style.height=o.height+"px",e.style.top=o.y!==null?o.y+"px":document.documentElement.clientHeight/2-e.clientHeight/2+"px",e.style.left=o.x!==null?o.x+"px":document.documentElement.clientWidth/2-e.clientWidth/2+"px"},C=t.defineComponent({__name:"ModalBackdrop",emits:["close"],setup(e,{emit:o}){const n=t.ref(null),l=o,i=()=>{n.value.style.width=document.documentElement.clientWidth+"px",n.value.style.height=document.documentElement.clientHeight+"px"},r=()=>{l("close"),document.body.style.overflow=""};return t.onMounted(()=>{i(),window.addEventListener("resize",i),document.body.style.overflow="hidden"}),t.onUnmounted(()=>{document.body.style.overflow="",window.removeEventListener("resize",i)}),(c,s)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"$backdrop",ref:n,onClick:r,class:"backdrop"},null,512))}}),G="",f=(e,o)=>{const n=e.__vccOpts||e;for(const[l,i]of o)n[l]=i;return n},v=f(C,[["__scopeId","data-v-a9a01d98"]]),S=[(e=>(t.pushScopeId("data-v-7868bb2d"),e=e(),t.popScopeId(),e))(()=>t.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),t.createElementVNode("path",{d:"M18 6l-12 12"}),t.createElementVNode("path",{d:"M6 6l12 12"})],-1))],N=t.defineComponent({__name:"ModalCloseButton",emits:["close"],setup(e,{emit:o}){const n=o,l=()=>{n("close")};return(i,r)=>(t.openBlock(),t.createElementBlock("button",{type:"button",onClick:t.withModifiers(l,["prevent"])},S))}}),Q="",z=f(N,[["__scopeId","data-v-7868bb2d"]]),V={class:"modal-header__title"},W={class:"modal-header__buttons"},H=t.defineComponent({__name:"Modal",props:{name:{type:String,required:!0},title:{type:String,required:!1,default:null},minWidth:{type:String,default:"200px"},width:{type:String,default:"600px"},minHeight:{type:String,default:"200px"},height:{type:String,default:"400px"},backdrop:{type:Boolean,default:!1},resize:{type:Boolean,default:!0}},setup(e){const o=t.ref(!1),n=e,l=t.ref(null),i=t.ref(null),r=t.ref(null);let c=null;const s=()=>{c=c||{x:document.documentElement.clientWidth/2-Number(n.width.replace("px",""))/2,y:window.innerHeight/2-Number(n.height.replace("px",""))/2,width:Number(n.width.replace("px","")),height:Number(n.height.replace("px",""))},o.value=!0,t.nextTick(async()=>{l.value===null||i.value===null||(l.value.style.minWidth=n.minWidth,l.value.style.minHeight=n.minHeight,E(l.value,c),n.resize&&B(l.value,a=>{c=a}),M(l.value,a=>{c=a}))})},_=()=>{o.value=!1};return t.onMounted(()=>{k(n.name,{open:s,close:_})}),t.onUnmounted(()=>{w(n.name)}),(a,u)=>(t.openBlock(),t.createElementBlock("div",null,[t.createElementVNode("div",{ref_key:"$modal",ref:l,class:t.normalizeClass(["modal",{"modal--hidden":!o.value}])},[t.createElementVNode("div",{ref_key:"$headerWrapper",ref:i,class:"modal-header-wrapper"},[t.createElementVNode("div",{ref_key:"$header",ref:r,class:"modal-header"},[t.createElementVNode("div",V,t.toDisplayString(e.title),1),t.createElementVNode("div",W,[t.createVNode(z,{onClose:_})])],512)],512),t.renderSlot(a.$slots,"default",{},void 0,!0)],2),n.backdrop&&o.value?(t.openBlock(),t.createBlock(v,{key:0,onClose:_})):t.createCommentVNode("",!0)]))}}),Z="",I=f(H,[["__scopeId","data-v-05050626"]]),L=t.defineComponent({__name:"ModalFooter",setup(e){const o=t.ref(null);let n=!0;return t.onMounted(()=>{n=o.value!==null&&o.value.querySelectorAll("button").length>0}),(l,i)=>t.unref(n)?(t.openBlock(),t.createElementBlock("div",{key:0,ref_key:"$footerNode",ref:o,class:"modal-footer"},[t.renderSlot(l.$slots,"default",{},void 0,!0)],512)):t.createCommentVNode("",!0)}}),$="",R=f(L,[["__scopeId","data-v-0db79781"]]),ee="",T={},q={class:"modal-body"},F={class:"modal-body__content"};function j(e,o){return t.openBlock(),t.createElementBlock("div",q,[t.createElementVNode("div",F,[t.renderSlot(e.$slots,"default",{},void 0,!0)])])}const O=f(T,[["render",j],["__scopeId","data-v-dc47cc62"]]),te="",A={},P={type:"button"};function U(e,o){return t.openBlock(),t.createElementBlock("button",P,[t.renderSlot(e.$slots,"default",{},void 0,!0)])}const X=f(A,[["render",U],["__scopeId","data-v-f7bd57cd"]]),Y=e=>{var o;(o=g(e))==null||o.open()},D=e=>{var o;(o=g(e))==null||o.close()};p.Modal=I,p.ModalButton=X,p.ModalContent=O,p.ModalFooter=R,p.close=D,p.open=Y,Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=modal.umd.cjs.map
