(function(f,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(f=typeof globalThis<"u"?globalThis:f||self,o(f.Modal={},f.Vue))})(this,function(f,o){"use strict";const x=o.defineComponent({__name:"ModalBackdrop",emits:["close"],setup(e,{emit:t}){const n=o.ref(null),l=()=>{n.value.style.width=document.documentElement.clientWidth+"px",n.value.style.height=document.body.getBoundingClientRect().height+"px"},i=()=>{t("close"),document.body.style.overflow=""};return o.onMounted(()=>{l(),window.addEventListener("resize",l),document.body.style.overflow="hidden"}),o.onUnmounted(()=>{document.body.style.overflow=""}),(s,c)=>(o.openBlock(),o.createElementBlock("div",{ref_key:"$backdrop",ref:n,onClick:i,class:"backdrop"},null,512))}}),T="",_=(e,t)=>{const n=e.__vccOpts||e;for(const[l,i]of t)n[l]=i;return n},w=_(x,[["__scopeId","data-v-ffcf226b"]]),y=new Map,k=(e,t)=>{y.set(e,t)},m=e=>{const t=y.get(e);return t===void 0?null:t},E=e=>{y.delete(e)},b=(e,t,n)=>e-n.left>-10&&e-n.left<10&&t-n.top>-10&&t-n.top<10?"top-left":n.right-e>-10&&n.right-e<10&&t-n.top>-10&&t-n.top<10?"top-right":n.bottom-t>-10&&n.bottom-t<10&&e-n.left>-10&&e-n.left<10?"bottom-left":n.bottom-t>-10&&n.bottom-t<10&&n.right-e>-10&&n.right-e<10?"bottom-right":e-n.left>-5&&e-n.left<5?"left":n.right-e>-5&&n.right-e<5?"right":t-n.top>-5&&t-n.top<5?"top":n.bottom-t>-5&&n.bottom-t<5?"bottom":null,B=(e,t,n)=>{switch(b(e,t,n)){case"left":case"right":return"col-resize";case"top":case"bottom":return"row-resize";case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";default:return""}},v=(e,t)=>{e.addEventListener("mousemove",n=>{const l=e.getBoundingClientRect();e.style.cursor=B(n.clientX,n.clientY,l)}),e.addEventListener("mousedown",n=>{const l=n.clientX,i=n.clientY,s=e.getBoundingClientRect();let c=b(l,i,s);if(c===null)return;const d=e.clientWidth,h=e.clientHeight;let p=d,a=h,u=s.top,g=s.left;e.style.userSelect="none",document.addEventListener("mousemove",r=>{c!==null&&(c==="left"&&(g=s.left+(r.clientX-l),p=d-(r.clientX-l)),c==="right"&&(p=d+(r.clientX-l)),c==="top"&&(u=s.top+(r.clientY-i),a=h-(r.clientY-i)),c==="bottom"&&(a=h+(r.clientY-i)),c=="top-left"&&(g=s.left+(r.clientX-l),p=d-(r.clientX-l),u=s.top+(r.clientY-i),a=h-(r.clientY-i)),c=="top-right"&&(p=d+(r.clientX-l),u=s.top+(r.clientY-i),a=h-(r.clientY-i)),c=="bottom-left"&&(g=s.left+(r.clientX-l),p=d-(r.clientX-l),a=h+(r.clientY-i)),c=="bottom-right"&&(p=d+(r.clientX-l),a=h+(r.clientY-i)),e.style.width=p+"px",e.style.height=a+"px",e.style.left=g+"px",e.style.top=u+"px",t({x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y,width:e.clientWidth,height:e.clientHeight}))}),e.addEventListener("mouseup",()=>{c=null,e.style.userSelect=""})})},M=(e,t)=>{e.querySelector(".modal-header").addEventListener("mousedown",l=>{let i=l.clientX-e.getBoundingClientRect().left,s=l.clientY-e.getBoundingClientRect().top;const c=function(d){e.style.top=d.clientY-s+"px",e.style.left=d.clientX-i+"px",t({x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y,width:e.clientWidth,height:e.clientHeight})};document.addEventListener("mousemove",c),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",c)},{once:!0})})},C=(e,t)=>{e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.top=t.y!==null?t.y+"px":document.documentElement.clientHeight/2-e.clientHeight/2+"px",e.style.left=t.x!==null?t.x+"px":document.documentElement.clientWidth/2-e.clientWidth/2+"px"},N=e=>(o.pushScopeId("data-v-7c0740c7"),e=e(),o.popScopeId(),e),S={class:"modal-header__title"},z={class:"modal-header__buttons"},V=["onClick"],R=[N(()=>o.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[o.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),o.createElementVNode("path",{d:"M18 6l-12 12"}),o.createElementVNode("path",{d:"M6 6l12 12"})],-1))],W=o.defineComponent({__name:"Modal",props:{name:{type:String,required:!0},title:{type:String,required:!1,default:null},width:{type:String,default:"600px"},height:{type:String,default:"400px"},backdrop:{type:Boolean,default:!1},resize:{type:Boolean,default:!0},scroll:{type:Boolean,default:!1}},setup(e){const t=e,n=o.ref(!1),l=o.ref(null),i=o.ref(null),s=o.ref(null),c=o.ref(null);let d=null;const h=()=>{d=d||{x:document.documentElement.clientWidth/2-Number(t.width.replace("px",""))/2,y:window.innerHeight/2-Number(t.height.replace("px",""))/2,width:Number(t.width.replace("px","")),height:Number(t.height.replace("px",""))},n.value=!0,o.nextTick(async()=>{l.value===null||c.value==null||i.value===null||(C(l.value,d),t.resize&&v(l.value,a=>{d=a}),M(l.value,a=>{d=a}),c.value.style.height=`calc(100% - ${i.value.clientHeight}px)`)})},p=()=>{n.value=!1};return o.onMounted(()=>{k(t.name,{open:h,close:p})}),o.onUnmounted(()=>{E(t.name)}),(a,u)=>(o.openBlock(),o.createElementBlock("div",null,[o.createElementVNode("div",{ref_key:"$modal",ref:l,class:o.normalizeClass(["modal",{"modal--hidden":!n.value}])},[o.createElementVNode("div",{ref_key:"$headerWrapper",ref:i,class:"modal-header-wrapper"},[o.createElementVNode("div",{ref_key:"$header",ref:s,class:"modal-header"},[o.createElementVNode("div",S,o.toDisplayString(e.title),1),o.createElementVNode("div",z,[o.createElementVNode("button",{type:"button",onClick:o.withModifiers(p,["prevent"])},R,8,V)])],512)],512),o.createElementVNode("div",{ref_key:"$modalBody",ref:c,class:"modal-body"},[o.createElementVNode("div",{class:o.normalizeClass(["modal-body__content",{"modal-body__content--scroll":t.scroll}])},[o.renderSlot(a.$slots,"default",{},void 0,!0)],2)],512)],2),t.backdrop&&n.value?(o.openBlock(),o.createBlock(w,{key:0,onClose:p})):o.createCommentVNode("",!0)]))}}),j="",H=_(W,[["__scopeId","data-v-7c0740c7"]]),L=e=>{var t;(t=m(e))==null||t.open()},I=e=>{var t;(t=m(e))==null||t.close()};f.Modal=H,f.close=I,f.open=L,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=modal.umd.cjs.map
